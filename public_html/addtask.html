<!DOCTYPE html>

<html lang="en">
    <head>
        <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" rel="stylesheet"/>
        <link href="css/style.css" rel="stylesheet"/>
        <script src="https://unpkg.com/scrollreveal@4"></script>
        <link href='https://fonts.googleapis.com/css?family=Oswald:400,700' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Avenir' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Ubuntu' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Roboto' type='text/css'>
        <script type='text/javascript'>
function addFields(fieldName) {
    // remove all extra form questions specific to a given task
    const addFormTo = document.getElementById("task_form");
    while (addFormTo.childElementCount > 3) {
        addFormTo.removeChild(addFormTo.lastChild);
    }
    // add extra questions based on task chosen
    if (fieldName === "color") {
        const par = document.createElement("p");
        par.textContent = "Pick a color shirt for the robot to find.";
        addFormTo.appendChild(par);
        const select = document.createElement("select");
        select.name = "colors";
        const colors = ["red", "blue", "green", "yellow"];
        for (let i = 0; i < colors.length; ++i) {
            const option = document.createElement("option");
            option.value = colors[i];
            option.textContent = colors[i];
            select.appendChild(option);
        }
        addFormTo.appendChild(select);
        addFormTo.appendChild(document.createElement("br"));
    } else if (fieldName == "target") {
        const par = document.createElement("p");
        par.textContent = "Pick a target object for the robot to find.";
        addFormTo.appendChild(par);
        const select = document.createElement("select");
        select.name = "colors";
        const objects = ["can", "bottle", "pen", "shoe"];
        for (let i = 0; i < objects.length; ++i) {
            const option = document.createElement("option");
            option.value = objects[i];
            option.textContent = objects[i];
            select.appendChild(option);
        }
        addFormTo.appendChild(select);
        addFormTo.appendChild(document.createElement("br"));
    }
    if (!(fieldName === "default")) {
        // add submit button
        const input = document.createElement("input");
        input.type = "submit";
        input.value="Submit Task";
        addFormTo.appendChild(input);
    }
}
        </script>
        <script type='text/javascript'>
function submitTask() {
    // remove form and add thank you message
    const content = document.getElementById("content");
    content.removeChild(document.getElementById("task_form"));
    const par = document.createElement("h3");
    par.textContent = "Thank you for submitting a task for the robot!";
    content.appendChild(par);
    // reload page
    setTimeout(location.reload.bind(location), 1000);
    // TODO: add code for storing information from form
}
        </script>
    </head>
    <body>
        <?php include 'components/navBar.html';?>    
        <section id="main" class = "full">
            <header class="major">
                <h2>Submit a Task for the Robot</h2>
            </header>
            <section id="content" class="full">
                <form id="task_form" name="task_form" display="none" onsubmit="submitTask()">
                    <p>Pick a task for the robot:</p>
                    <select id="task_list" name="tasks" onchange="addFields(this.value)">
                        <option value="default" selected>Select one of the following...</option>
                        <option value="color">color shirt</option>
                        <option value="target">target search</option>
                        <option value="following">human following</option>
                        <option value="delivery">object delivery</option>
                    </select><br/> 
                </form>
            </section>
        </section>

        <footer id="footer" class = "foot">
            <span class="copyright">
                &copy; Copyright 2018 University of Texas at Austin Learning Agents Research Lab. All rights reserved.</a>
            </span>
        </footer>
    </body>
    <html>
